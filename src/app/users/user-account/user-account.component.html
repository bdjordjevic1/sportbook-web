<ion-header>
    <ion-toolbar>
        <ion-title color="tertiary">My account</ion-title>
    </ion-toolbar>
</ion-header>
<app-notification-container></app-notification-container>
<ion-content class="account" *ngIf="currentUser">
    <div class="profile-picture text-center">
        <img [src]="profilePicture"
             alt="Jordan stares"
             class="img-fluid rounded-circle">
    </div>
    <div class="text-center">
        <span (click)="fileInput.click()">Change profile picture</span>
        <input type="file"
               class="custom-file-input"
               id="customFile"
               (change)="changeProfilePicture($event)"
               accept="image/png, image/jpeg"
               #fileInput>
        <ion-spinner name="lines" *ngIf="isLoading"></ion-spinner>
    </div>
    <form [formGroup]="accountForm" (ngSubmit)="onSubmit()">
        <ion-grid>
            <ion-row>
                <ion-col>
                    <ion-item>
                        <ion-input
                                name="firstName"
                                type="text"
                                placeholder="First name"
                                formControlName="firstName">
                        </ion-input>
                    </ion-item>
                    <app-sb-error
                            *ngIf="accountForm.get('firstName').invalid && accountForm.get('firstName').touched"
                            [field]="accountForm.get('firstName')"
                            fieldName="firstName">
                    </app-sb-error>
                    <ion-item>
                        <ion-input
                                name="lastName"
                                type="text"
                                placeholder="Last name"
                                formControlName="lastName">
                        </ion-input>
                    </ion-item>
                    <app-sb-error
                            *ngIf="accountForm.get('lastName').invalid && accountForm.get('lastName').touched"
                            [field]="accountForm.get('lastName')"
                            fieldName="lastName">
                    </app-sb-error>
                    <ion-button
                            class="ion-margin-top"
                            expand="full"
                            color="tertiary"
                            shape="round"
                            type="submit">Update profile</ion-button>
                    <ion-button
                            class="ion-margin-top"
                            expand="full"
                            color="danger"
                            shape="round"
                            type="button"
                            (click)="onLogout()">Logout</ion-button>
                </ion-col>
            </ion-row>
        </ion-grid>
    </form>
</ion-content>
